---
title: "R for repruducible science"
author: "EvB"
date: "4/6/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
set.seed(123)   # Makes it reproduceable even if random number generators are used

```

## Background

```{r setup}
#load packages & data
library(rethinking)
library(rstan)
library(tidyverse)
library(brms)
d <- read.csv("data/categorization1_data.csv")
```

<br>
<br>
## 1. Data processing

#### 1. 1 Remove extra participants
First, because of an error when sending the study out, a whole bunch of participants did the experiment twice. Second, the data file includes the anchors on 7-point scales. The following chunk removes extra responses by participants and reconds string values to numerals.

```{r munging}
d <- read.csv("data/categorization1_data.csv", na.strings = "")%>% 
  mutate(dupe = duplicated(IPAddress)) %>% #Checks if IP adress has occurred previously
  filter(dupe == FALSE) %>%  # removes duplicated IP adresses
  mutate( across(starts_with("ess"),  # changes responses to numerical
                  ~recode(.,"Stämmer inte alls\n1" ="1",
                          "Stämmer helt\n7" = "7") %>% as.integer()),
          across(starts_with("hen_attitudes"),
                 ~recode(.,"Mycket bra\n7" ="1",
                          "Mycket dåligt\n1" = "7") %>% as.integer()),
          across(starts_with("GIS"),  # changes responses to numerical
                  ~recode(.,"Stämmer inte alls\n1" ="1",
                          "Stämmer helt\n7" = "7") %>% as.integer()), id = row_number())
  
```

#### 1.2 Check to make sure all participants completed the experiment

The aim of the experiment was to investigate the effect of pronoun use on gender categorization of faces. First, then, participants completed a task where they used a pronoun three times. The following code checks whether participants used the correct pronoun three times. If they didn't they are assigned a NA value

```{r}
d <- manipulation_check(d)

```

